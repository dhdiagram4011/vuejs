<template>
<div>
<h2>login</h2>
<form @submit="onSubmit">
<input placeholder = "Enter your ID" v-model="uid" v-validate="'require">
<input placeholder = "Enter your password" v-model="password" type="password" v-validate="'required|min:6'">
<button type="submit">Login</button>

</form>
</div>
</template>


<script>
import { mapActions,mapGetters } from 'vuex'


export default {
    name: 'Login',
    data: () => ({
        uid: '',
        password: ''
    }),
    methods: {
        onSubmit () {
            console.log(this.uid)
            console.log(this.password)
        }
    }
}

methods: {
    ...mapActions(['login']),
    async onSubmit () {
        this.$validator.validateAll()
        if (!this.errors.any()) {
        try {
            let loginResult = await this.login({uid: this.uid, password: this.password})
            if (loginResult) this.goToPages()
        } catch (err) {
          console.log(err)
        }
        } else {
          console.log('validate err')
        }
    },
    goToPages() {
        this.$router.push({
            name: 'todo'
        })
    }
}
</script>

<style>
</style>
